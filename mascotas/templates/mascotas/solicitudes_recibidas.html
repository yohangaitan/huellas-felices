{% extends "mascotas/base.html" %}

{% block title %}Solicitudes Recibidas{% endblock %}

{% block content %}
<div class="container mx-auto p-4 md:p-8">
    <h1 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">
        <i class="bi bi-envelope-fill mr-2 text-orange-600"></i> Solicitudes Recibidas
    </h1>

    {% if solicitudes %}
    <p class="text-gray-600 mb-4">Tienes {{ solicitudes|length }} solicitudes para tus mascotas.</p>

    <div class="bg-white shadow-lg rounded-lg overflow-hidden">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-orange-500 text-white">
                <tr>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">
                        Mascota
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider hidden sm:table-cell">
                        Fecha
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">
                        Solicitante
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider hidden md:table-cell">
                        Contacto
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">
                        Mensaje
                    </th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                {% for solicitud in solicitudes %}
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-orange-600">
                        <a href="{% url 'mascotas:detalle_mascota' pk=solicitud.mascota.pk %}">
                            {{ solicitud.mascota.nombre }}
                        </a>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 hidden sm:table-cell">
                        {{ solicitud.fecha_solicitud|date:"d M y" }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        {{ solicitud.nombre_completo }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 hidden md:table-cell">
                        <a href="mailto:{{ solicitud.correo_electronico }}" class="text-blue-500 hover:text-blue-700 block">{{ solicitud.correo_electronico }}</a>
                        {% if solicitud.telefono %}
                            <span class="text-xs text-gray-400 block">{{ solicitud.telefono }}</span>
                        {% endif %}
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-700 max-w-sm overflow-hidden text-ellipsis">
                        <p class="truncate">{{ solicitud.mensaje }}</p>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4" role="alert">
        <p class="font-bold">¡Todo despejado!</p>
        <p>Aún no has recibido solicitudes para tus mascotas.</p>
    </div>
    {% endif %}
</div>
{% endblock content %}